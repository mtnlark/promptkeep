# Usage Guide

This page provides detailed guides and examples for using PromptKeep commands.

## Initializing Your Prompt Vault (`init`)

Before you can add or use prompts, you need a vault to store them in. The `init` command creates this vault structure for you.

### Basic Usage

```bash
promptkeep init
```

This command creates a directory named `PromptVault` in your home directory (`~`). Inside `PromptVault`, it creates a `Prompts` subdirectory where your Markdown prompt files will be stored.

### Specifying a Custom Path

You can create the vault in a different location by providing a path:

```bash
promptkeep init /path/to/your/desired/vault
```

*   Replace `/path/to/your/desired/vault` with the actual path.
*   The command will expand `~` if used in the path.

### Example Output

Upon successful creation, you'll see a confirmation message:

```text
───────────────── Success ──────────────────
✅ Prompt vault created successfully at:
/Users/youruser/PromptVault

Next steps:
1. Add your prompts to the 'Prompts' directory
2. Use 'promptkeep add' to create new prompts
3. Use 'promptkeep pick' to select and copy
   prompts
4. Use 'promptkeep edit' to modify existing
   prompts
5. Use the --tag option with pick/edit to
   filter by tags
─────────────────────────────────────────────
```

### Vault Structure

The `init` command sets up the following structure:

```
YourVaultPath/
└── Prompts/
    └── example_prompt.md
```

*   An `example_prompt.md` file is included to show you the expected format for your prompts, including YAML front matter.

*   If a directory already exists at the specified path, `init` will **overwrite** it after removing the existing contents.

## Adding New Prompts (`add`)

Once your vault is initialized, you can start adding prompts using the `add` command.

### Interactive Mode

If you run the command without specifying options, it will prompt you interactively for the title, description, and tags:

```bash
promptkeep add
```

Follow the on-screen prompts to enter the necessary information.

### Using Options

You can provide the prompt details directly using command-line options:

```bash
promptkeep add --title "My Awesome Prompt" --description "Does something amazing" --tag awesome --tag example --vault /path/to/vault
```

*   `--title` / `-t`: **(Required)** The title for your prompt. This will be used in the YAML front matter and to generate part of the filename.
*   `--description` / `-d`: (Optional) A short description of what the prompt does.
*   `--tag`: (Optional) Add one or more tags for categorization. You can use this option multiple times (`--tag tag1 --tag tag2`) or provide comma-separated tags when prompted interactively.
*   `--vault` / `-v`: (Optional) Specify the path to your vault if it's not the default or set by the `PROMPTKEEP_VAULT` environment variable.

### The Process

When you run `add`:

1.  **File Creation:** A new Markdown file is created in your vault's `Prompts` directory. The filename is generated by sanitizing the title (lowercase, spaces to hyphens, etc.) and adding a timestamp (e.g., `my-awesome-prompt-20240515-103000.md`).
2.  **YAML Front Matter:** The file is pre-populated with YAML front matter containing the `title`, `description`, and `tags` you provided.
3.  **Editor Opens:** Your default text editor (specified by the `$EDITOR` environment variable, defaulting to `vim`) opens the new file.
4.  **Write Your Prompt:** Add the actual content of your prompt below the second `---` line in the file.
5.  **Save & Close:** Save the file and close the editor.
6.  **Confirmation:** PromptKeep confirms that the prompt was created successfully.

### Duplicate Warnings

If a prompt with a similar filename (based on the title) already exists, PromptKeep will show a warning and ask for confirmation before proceeding.

## Selecting and Copying Prompts (`pick`)

The `pick` command is used to quickly find a prompt and copy its content (excluding the YAML front matter) to your system clipboard, ready for pasting elsewhere.

### Basic Usage

```bash
promptkeep pick
```

This opens an interactive fuzzy finder (`fzf`) listing all prompts in your vault.

*   **Search:** Start typing to filter prompts by filename, title, tags, or content.
*   **Preview:** The right-hand panel shows a preview of the selected prompt, including its title, tags (from YAML), and the actual prompt content.
*   **Navigate:** Use arrow keys (up/down) to move through the list.
*   **Select:** Press `Enter` to choose the highlighted prompt.
*   **Cancel:** Press `Esc` or `Ctrl+C` to exit without selecting.

Upon selection, the prompt content is copied to your clipboard, and a success message is displayed.

### Filtering by Tags

You can narrow down the list of prompts shown in the fuzzy finder using tags:

```bash
promptkeep pick --tag email
```

This will only list prompts that have the `email` tag in their YAML front matter.

To filter by multiple tags (logical AND), use the `--tag` option multiple times:

```bash
promptkeep pick --tag email --tag draft
```

This will only list prompts tagged with *both* `email` AND `draft`.

### Specifying a Custom Vault

Use the `--vault` option if your vault is not in the default location or specified by the `PROMPTKEEP_VAULT` environment variable:

```bash
promptkeep pick --vault /path/to/your/vault --tag coding
```

### Requirements

*   The `pick` command requires `fzf` (a command-line fuzzy finder) to be installed and available in your system's PATH. If `fzf` is not found, the command will exit with an error.

## Editing Existing Prompts (`edit`)

The `edit` command allows you to select an existing prompt and open it in your default text editor for modification.

### Basic Usage

```bash
promptkeep edit
```

Similar to `pick`, this opens an interactive fuzzy finder (`fzf`) listing all prompts in your vault.

*   **Search:** Filter prompts by typing parts of the filename, title, tags, or content.
*   **Preview:** View the selected prompt's title, tags, and content.
*   **Navigate:** Use arrow keys.
*   **Select:** Press `Enter` to choose the prompt you want to edit.
*   **Cancel:** Press `Esc` or `Ctrl+C` to exit.

Upon selection, the chosen prompt file will be opened in your default text editor.

### Filtering by Tags

Just like `pick`, you can filter the list of prompts presented for editing using tags:

```bash
promptkeep edit --tag blogpost
```

To filter by multiple tags (logical AND):

```bash
promptkeep edit --tag blogpost --tag draft
```

### Specifying a Custom Vault

Use the `--vault` option for non-default vault locations:

```bash
promptkeep edit --vault /path/to/your/vault --tag python
```

### The Editing Process

1.  Select the prompt using the fuzzy finder.
2.  Your default text editor (defined by the `$EDITOR` environment variable) opens the selected Markdown file.
3.  Make any desired changes to the YAML front matter (title, description, tags) or the prompt content itself.
4.  Save the file and close the editor.
5.  PromptKeep confirms the update.

### Requirements

*   The `edit` command requires `fzf` to be installed and available in your PATH.
*   A default text editor must be configured via the `$EDITOR` environment variable. If `$EDITOR` is not set, it defaults to `vim`. Ensure the command specified in `$EDITOR` (e.g., `code --wait`, `vim`, `nano`, `cursor --wait`) is valid and accessible in your PATH. 